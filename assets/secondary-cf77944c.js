import{f as l}from"./fetchData-beefc172.js";function g(){const t=document.querySelectorAll(".photographer-media__image"),o=document.querySelector("#imageModalContainer"),e=document.querySelector(".image-modal");t.forEach(a=>{const n=a,c=n.src.slice(0,-13)+".webp";n.addEventListener("click",()=>{o.showModal(),e.setAttribute("src",c);const s=o.offsetWidth/o.offsetHeight;e.naturalWidth/e.naturalHeight>s?(e.style.width="100%",e.style.height="auto"):(e.style.width="auto",e.style.height="100%")})}),o.addEventListener("cancel",()=>{e.setAttribute("src","#")})}u();async function u(){const t=h();let o="popular";t?(await f(t),await p(t,o),g()):console.log("Incorrect photographer ID")}function h(){const o=new URLSearchParams(window.location.search).get("id");if(o)return Number(o);console.log("Error : no photographer ID")}async function f(t){const o=document.querySelector(".photographer-presentation__name"),e=document.querySelector(".photographer-presentation__location"),a=document.querySelector(".photographer-presentation__tagline"),n=document.querySelector(".photographer-presentation__image"),i=document.querySelector(".contact-modal__title"),c=document.querySelector(".photographer-info-bar__price");(await l("photographers")).forEach(r=>{r.id===t&&(o.innerText=r.name,e.innerText=`${r.city}, ${r.country}`,a.innerText=r.tagline,n.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${r.portrait}`),i.innerText=`Contactez-moi ${r.name}`,c.innerText=`${r.price}â‚¬ / jour`)})}async function p(t,o){const e=await l("media"),a=document.querySelector(".photographer-media__container"),n=document.querySelector(".photographer-info-bar__likes");let i=0;w(e,o).forEach(s=>{if(s.photographerId===t){const r=document.createElement("div");r.classList.add("photographer-media__media");let d;s.image?(d=_(s),r.appendChild(d)):s.video&&(d=y(s),r.appendChild(d));const m=I(s);r.appendChild(m),a.appendChild(r),i+=s.likes}}),n.innerHTML=`${i} <i class="fa-solid fa-heart"></i>`}function _(t){const e=`/Fisheye/images/photographers-media/${t.photographerId}/${t.image}`.slice(0,-5)+"_resized.webp",a=document.createElement("img");return a.setAttribute("src",e),a.setAttribute("loading","lazy"),a.setAttribute("decoding","async"),a.classList.add("photographer-media__image"),a}function y(t){const o=document.createElement("video");o.classList.add("photographer-media__image"),o.setAttribute("controls","");const e=document.createElement("source");return e.setAttribute("src",`/Fisheye/images/photographers-media/${t.photographerId}/${t.video}`),o.setAttribute("loading","lazy"),o.appendChild(e),o}function I(t){const o=document.createElement("div");o.classList.add("photographer-media__legend");const e=document.createElement("span");e.innerText=t.title,e.classList.add("photographer-media__legend-name");const a=document.createElement("span");return a.innerHTML=`${t.likes} <i class="fa-regular fa-heart"></i>`,a.classList.add("photographer-media__legend-likes"),o.append(e,a),o}const E=document.querySelector(".header__logo");E.addEventListener("click",()=>{window.location.href="/Fisheye/index.html"});const L=document.querySelector(".photographer-media__order-select");L.addEventListener("change",t=>{const o=t.target,e=h();e&&(S(),p(e,o.value))});function w(t,o){switch(o){case"popular":t.sort((e,a)=>a.likes-e.likes);break;case"date":t.sort((e,a)=>{const n=new Date(e.date),i=new Date(a.date);return n<i?-1:n>i?1:0});break;case"name":t.sort((e,a)=>{const n=e.title.toUpperCase(),i=a.title.toUpperCase();return n<i?-1:n>i?1:0});break}return t}function S(){const t=document.querySelector(".photographer-media__container");for(;t.firstChild;)t.removeChild(t.lastChild)}
