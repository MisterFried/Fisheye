import{f as C}from"./fetchPhotographersData-e10f7f4d.js";async function $(){const e=q();if(e){const a=await C();if(a){const n=a.photographers,t=a.media,o=n.find(s=>s.id===e);let r=t.filter(s=>s.photographerId===e);if(o&&r.length!==0){const s=T(r,"popular");w(o),H(s,o.price),L(s);const m=document.querySelector(".photographer-media__order-select");m.addEventListener("change",()=>{const i=T(r,m.value);N(),L(i)})}}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function q(){const a=new URLSearchParams(window.location.search).get("id");if(a)return Number(a)}function w(e){const a=document.querySelector(".photographer-presentation__name"),n=document.querySelector(".photographer-presentation__location"),t=document.querySelector(".photographer-presentation__tagline"),o=document.querySelector(".photographer-presentation__image"),r=document.querySelector(".contact-modal__title");a.innerText=e.name,n.innerText=`${e.city}, ${e.country}`,t.innerText=e.tagline,o.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${e.portrait}`),o.setAttribute("alt",`Photo de profil de ${e.name}`),r.innerText=`Contactez-moi ${e.name}`}function L(e){const a=document.querySelector(".photographer-media__container");e.forEach(n=>{const t=document.createElement("div");t.classList.add("photographer-media__media-container");let o;n.image&&(o=P(n),t.appendChild(o)),n.video&&(o=A(n),t.appendChild(o)),!n.image&&!n.video&&console.log(`Couldn't find the filename for : ${n.title}`);const r=B(n);t.appendChild(r),a.appendChild(t)}),D(e),U(e)}function P(e){const n=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("button");t.classList.add("photographer-media__image-button-container");const o=document.createElement("img");return o.src=n,o.classList.add("photographer-media__image"),o.alt=`Photo : ${e.title}`,o.decoding="async",t.appendChild(o),t}function A(e){const a=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,n=a.slice(0,-4)+"_thumbnail.png",t=document.createElement("button");t.classList.add("photographer-media__video-button-container");const o=document.createElement("video"),r=document.createElement("source");return o.classList.add("photographer-media__video"),o.poster=n,o.setAttribute("controls",""),r.src=a,o.appendChild(r),t.appendChild(o),t}function B(e){const a=document.createElement("div"),n=document.createElement("span"),t=document.createElement("button");return a.classList.add("photographer-media__legend"),n.classList.add("photographer-media__legend-name"),n.innerText=e.title,t.classList.add("photographer-media__legend-likes"),e.isLiked?t.innerHTML=`${e.likes} <i class="fa-solid fa-heart"></i>`:t.innerHTML=`${e.likes} <i class="fa-regular fa-heart"></i>`,a.append(n,t),a}function H(e,a){const n=document.querySelector(".photographer-info-bar__likes");let t;t=document.querySelector(".photographer-info-bar__price");let o=0;e.forEach(r=>{o+=r.likes}),n.innerHTML=`${o} <i class = "fa-solid fa-heart"></i>`,t.innerText=`${a}â‚¬/ jour`}function x(e){const a=document.querySelector(".photographer-info-bar__likes");let n=0;e.forEach(t=>{n+=t.likes}),a.innerHTML=`${n} <i class = "fa-solid fa-heart"></i>`}function D(e){const a=Array.from(document.querySelectorAll(".photographer-media__image-button-container, .photographer-media__video-button-container")),n=document.querySelector("#mediaModal"),t=document.querySelector(".media-modal__image"),o=document.querySelector(".media-modal__video"),r=document.createElement("source");o.appendChild(r);const s=document.querySelector(".media-modal__legend"),m=document.querySelector(".media-modal__next-icon"),i=document.querySelector(".media-modal__previous-icon");let f="",p="",u="",g="",y=[];const v=()=>I(1),E=()=>I(-1);a.forEach(c=>{c.addEventListener("click",h=>{n.showModal();const d=h.target.firstElementChild;d instanceof HTMLImageElement?(p="image",f=`${d.src.slice(0,-13)}.webp`):d instanceof HTMLVideoElement&&(p="video",f=d.firstElementChild.src),y=f.split("/"),g=y.pop(),u=y.join("/"),S(p,g,u),m.addEventListener("click",v),i.addEventListener("click",E),document.addEventListener("keydown",M)})});function M(c){c.key==="ArrowLeft"?i.click():c.key==="ArrowRight"&&m.click()}function I(c){let h="";t.style.display==="block"&&o.style.display==="none"&&(y=t.src.split("/")),t.style.display==="none"&&o.style.display==="block"&&(y=r.src.split("/")),g=y.pop(),u=y.join("/");let l=e.findIndex(d=>d.image===g||d.video===g);l+c<=-1?l=e.length:l+c>=e.length&&(l=-1),e[l+c].image?(p="image",h=e[l+c].image):e[l+c].video&&(p="video",h=e[l+c].video),S(p,h,u)}function S(c,h,l){var _,b;let d="";switch(c){case"image":t.style.display="block",o.style.display="none",t.src=`${l}/${h}`,d=(_=e.find(k=>k.image===h))==null?void 0:_.title;break;case"video":t.style.display="none",o.style.display="block",r.src=`${l}/${h}`,d=(b=e.find(k=>k.video===h))==null?void 0:b.title;break}s.innerText=d}n.addEventListener("close",()=>{t.src="#",t.style.display="none",r.src="#",o.style.display="none",m.removeEventListener("click",v),i.removeEventListener("click",E),document.removeEventListener("keydown",M)})}function T(e,a){switch(a){case"popular":e.sort((n,t)=>t.likes-n.likes);break;case"date":e.sort((n,t)=>{const o=new Date(n.date),r=new Date(t.date);return o<r?-1:o>r?1:0});break;case"name":e.sort((n,t)=>{const o=n.title.toUpperCase(),r=t.title.toUpperCase();return o<r?-1:o>r?1:0});break;default:console.log("Unknown sort method");break}return e}function N(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}function U(e){Array.from(document.querySelectorAll(".photographer-media__legend-likes")).forEach(n=>{n.addEventListener("click",t=>{var m;const r=(m=t.target.parentElement.parentElement.firstElementChild)==null?void 0:m.firstElementChild;if(r instanceof HTMLImageElement){const f=r.src.split("/").pop().slice(0,-13),p=e.findIndex(u=>{var g;return((g=u.image)==null?void 0:g.slice(0,-5))===f});s(p)}else if(r instanceof HTMLVideoElement){const f=r.firstChild.src.split("/").pop(),p=e.findIndex(u=>u.video===f);s(p)}function s(i){e[i].isLiked?(e[i].likes-=1,e[i].isLiked=!1,n.innerHTML=`${e[i].likes} <i class="fa-regular fa-heart"></i>`):(e[i].likes+=1,e[i].isLiked=!0,n.innerHTML=`${e[i].likes} <i class="fa-solid fa-heart"></i>`),x(e)}})})}$();const V=document.querySelector(".header__redirect");V.addEventListener("click",()=>{window.location.href="/Fisheye/"});
