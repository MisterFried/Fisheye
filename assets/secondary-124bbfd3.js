import{f as l}from"./fetchData-fa0d2be4.js";function u(){const t=document.querySelectorAll(".photographer-media__image"),e=document.querySelector("#imageModalContainer"),o=document.querySelector("#imageInModal");t.forEach(r=>{console.log(r);const n=r;n.addEventListener("click",()=>{console.log(`You clicked on ${n.src}`),e.showModal(),o.setAttribute("src",n.src);const i=e.offsetWidth/e.offsetHeight,s=o.naturalWidth/o.naturalHeight;console.log(s),console.log(i),s>i?(o.style.width="100%",o.style.height="auto"):(o.style.width="auto",o.style.height="100%")})})}g();async function g(){const t=h();let e="popular";t?(await f(t),await p(t,e),u()):console.log("Incorrect photographer ID")}function h(){const e=new URLSearchParams(window.location.search).get("id");if(e)return Number(e);console.log("Error : no photographer ID")}async function f(t){const e=document.querySelector(".photographer-presentation__name"),o=document.querySelector(".photographer-presentation__location"),r=document.querySelector(".photographer-presentation__tagline"),n=document.querySelector(".photographer-presentation__image"),i=document.querySelector(".contact-modal__title"),s=document.querySelector(".photographer-info-bar__price");(await l("photographers")).forEach(a=>{a.id===t&&(e.innerText=a.name,o.innerText=`${a.city}, ${a.country}`,r.innerText=a.tagline,n.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${a.portrait}`),i.innerText=`Contactez-moi ${a.name}`,s.innerText=`${a.price}â‚¬ / jour`)})}async function p(t,e){console.log("display media function start");const o=await l("media"),r=document.querySelector(".photographer-media__container"),n=document.querySelector(".photographer-info-bar__likes");let i=0;S(o,e).forEach(c=>{if(c.photographerId===t){const a=document.createElement("div");a.classList.add("photographer-media__media");let d;c.image?(d=y(c),a.appendChild(d)):c.video&&(d=_(c),a.appendChild(d));const m=E(c);a.appendChild(m),r.appendChild(a),i+=c.likes}}),n.innerHTML=`${i} <i class="fa-solid fa-heart"></i>`,console.log("display media function end")}function y(t){const e=document.createElement("img");return e.setAttribute("src",`/Fisheye/images/photographers-media/${t.photographerId}/${t.image}`),e.setAttribute("loading","lazy"),e.classList.add("photographer-media__image"),e}function _(t){const e=document.createElement("video");e.classList.add("photographer-media__image"),e.setAttribute("controls","");const o=document.createElement("source");return o.setAttribute("src",`/Fisheye/images/photographers-media/${t.photographerId}/${t.video}`),e.setAttribute("loading","lazy"),e.appendChild(o),e}function E(t){const e=document.createElement("div");e.classList.add("photographer-media__legend");const o=document.createElement("span");o.innerText=t.title,o.classList.add("photographer-media__legend-name");const r=document.createElement("span");return r.innerHTML=`${t.likes} <i class="fa-regular fa-heart"></i>`,r.classList.add("photographer-media__legend-likes"),e.append(o,r),e}const I=document.querySelector(".header__logo");I.addEventListener("click",()=>{window.location.href="/Fisheye/index.html"});const L=document.querySelector(".photographer-media__order-select");L.addEventListener("change",t=>{const e=t.target,o=h();o&&(w(),p(o,e.value))});function S(t,e){switch(e){case"popular":t.sort((o,r)=>r.likes-o.likes);break;case"date":t.sort((o,r)=>{const n=new Date(o.date),i=new Date(r.date);return n<i?-1:n>i?1:0});break;case"name":t.sort((o,r)=>{const n=o.title.toUpperCase(),i=r.title.toUpperCase();return n<i?-1:n>i?1:0});break}return t}function w(){const t=document.querySelector(".photographer-media__container");for(;t.firstChild;)t.removeChild(t.lastChild)}
