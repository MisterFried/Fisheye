import{f as l}from"./fetchPhotographersData-5dc40f52.js";async function u(){const o=h();let r="popular";if(o){const e=await l();if(e){const t=await g(o,e.photographers),a=await p(o,r,e.media);L(a,t),E()}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function h(){const r=new URLSearchParams(window.location.search).get("id");if(r)return Number(r)}async function g(o,r){const e=document.querySelector(".photographer-presentation__name"),t=document.querySelector(".photographer-presentation__location"),a=document.querySelector(".photographer-presentation__tagline"),s=document.querySelector(".photographer-presentation__image"),n=document.querySelector(".contact-modal__title");let c=0;return r.forEach(i=>{i.id===o&&(e.innerText=i.name,t.innerText=`${i.city}, ${i.country}`,a.innerText=i.tagline,s.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${i.portrait}`),n.innerText=`Contactez-moi ${i.name}`,c=i.price)}),c}async function p(o,r,e){const t=document.querySelector(".photographer-media__container");let a=0;return f(e,r).forEach(n=>{if(n.photographerId===o){const c=document.createElement("div");c.classList.add("photographer-media__media-container");let i;n.image&&(i=_(n),c.appendChild(i)),n.video&&(i=y(n),c.appendChild(i)),!n.image&&!n.video&&console.log(`Couldn't find the filename for : ${n.title}`);const m=I(n);c.appendChild(m),t.appendChild(c),a+=n.likes}}),a}function f(o,r){switch(r){case"popular":o.sort((e,t)=>t.likes-e.likes);break;case"date":o.sort((e,t)=>{const a=new Date(e.date),s=new Date(t.date);return a<s?-1:a>s?1:0});break;case"name":o.sort((e,t)=>{const a=e.title.toUpperCase(),s=t.title.toUpperCase();return a<s?-1:a>s?1:0});break}return o}function _(o){const e=`/Fisheye/images/photographers-media/${o.photographerId}/${o.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("img");return t.setAttribute("src",e),t.classList.add("photographer-media__image"),t.setAttribute("loading","lazy"),t.setAttribute("decoding","async"),t}function y(o){const r=`/Fisheye/images/photographers-media/${o.photographerId}/${o.video}`,e=r.slice(0,-4)+"_thumbnail.png",t=document.createElement("video"),a=document.createElement("source");return t.classList.add("photographer-media__video"),t.setAttribute("poster",e),t.setAttribute("loading","lazy"),t.setAttribute("controls",""),a.setAttribute("src",r),t.appendChild(a),t}function I(o){const r=document.createElement("div"),e=document.createElement("span"),t=document.createElement("span");return r.classList.add("photographer-media__legend"),e.classList.add("photographer-media__legend-name"),e.innerText=o.title,t.classList.add("photographer-media__legend-likes"),t.innerHTML=`${o.likes} <i class="fa-regular fa-heart"></i>`,r.append(e,t),r}function L(o,r){const e=document.querySelector(".photographer-info-bar__likes"),t=document.querySelector(".photographer-info-bar__price");e.innerHTML=`${o} <i class = "fa-solid fa-heart"></i>`,t.innerText=`${r}â‚¬/ jour`}function E(){const o=Array.from(document.querySelectorAll(".photographer-media__image")),r=document.querySelector("#imageModal"),e=document.querySelector(".image-modal");o.forEach(t=>{const s=t.src.slice(0,-13)+".webp";t.addEventListener("click",()=>{r.showModal(),e.setAttribute("src",s);const n=r.offsetWidth/r.offsetHeight;e.naturalWidth/e.naturalHeight>n?(e.style.width="100%",e.style.height="auto"):(e.style.width="auto",e.style.height="100%")})}),r.addEventListener("cancel",()=>{e.setAttribute("src","#")})}u();const b=document.querySelector(".header__logo");b.addEventListener("click",()=>{window.location.href="/Fisheye/index.html"});const d=document.querySelector(".photographer-media__order-select");d.addEventListener("change",async()=>{const o=d.value,r=h(),e=await l();r?e?(w(),p(r,o,e.media)):console.log("Error : couldn't fetch photographers' data to reorganize media"):console.log("Error : no photographer ID")});function w(){const o=document.querySelector(".photographer-media__container");for(;o.firstChild;)o.removeChild(o.firstChild)}
