import{f as h}from"./fetchPhotographersData-2f0680e8.js";async function g(){const e=p();let t="popular";if(e){const r=await h();if(r){const o=await f(e,r.photographers),n=await m(e,t,r.media);E(n,o)}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function p(){const t=new URLSearchParams(window.location.search).get("id");if(t)return Number(t)}async function f(e,t){const r=document.querySelector(".photographer-presentation__name"),o=document.querySelector(".photographer-presentation__location"),n=document.querySelector(".photographer-presentation__tagline"),s=document.querySelector(".photographer-presentation__image"),i=document.querySelector(".contact-modal__title");let c=0;return t.forEach(a=>{a.id===e&&(r.innerText=a.name,o.innerText=`${a.city}, ${a.country}`,n.innerText=a.tagline,s.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${a.portrait}`),s.setAttribute("alt",`Photo de profil de ${a.name}`),i.innerText=`Contactez-moi ${a.name}`,c=a.price)}),c}async function m(e,t,r){const o=document.querySelector(".photographer-media__container");let n=0;return _(r,t).forEach(i=>{if(i.photographerId===e){const c=document.createElement("div");c.classList.add("photographer-media__media-container");let a;i.image&&(a=y(i),c.appendChild(a)),i.video&&(a=L(i),c.appendChild(a)),!i.image&&!i.video&&console.log(`Couldn't find the filename for : ${i.title}`);const l=S(i);c.appendChild(l),o.appendChild(c),n+=i.likes}}),b(),T(),n}function _(e,t){switch(t){case"popular":e.sort((r,o)=>o.likes-r.likes);break;case"date":e.sort((r,o)=>{const n=new Date(r.date),s=new Date(o.date);return n<s?-1:n>s?1:0});break;case"name":e.sort((r,o)=>{const n=r.title.toUpperCase(),s=o.title.toUpperCase();return n<s?-1:n>s?1:0});break}return e}function y(e){const r=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",o=document.createElement("img");return o.setAttribute("src",r),o.classList.add("photographer-media__image"),o.setAttribute("alt",`Photo : ${e.title}`),o.setAttribute("decoding","async"),o}function L(e){const t=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,r=t.slice(0,-4)+"_thumbnail.png",o=document.createElement("video"),n=document.createElement("source");return o.classList.add("photographer-media__video"),o.setAttribute("poster",r),o.setAttribute("controls",""),n.setAttribute("src",t),o.appendChild(n),o}function S(e){const t=document.createElement("div"),r=document.createElement("span"),o=document.createElement("span");return t.classList.add("photographer-media__legend"),r.classList.add("photographer-media__legend-name"),r.innerText=e.title,o.classList.add("photographer-media__legend-likes"),o.innerHTML=`${e.likes} <i class="fa-regular fa-heart"></i>`,t.append(r,o),t}function E(e,t){const r=document.querySelector(".photographer-info-bar__likes");let o;o=document.querySelector(".photographer-info-bar__price"),r.innerHTML=`${e} <i class = "fa-solid fa-heart"></i>`,o.innerText=`${t}â‚¬/ jour`}function b(){const e=Array.from(document.querySelectorAll(".photographer-media__image")),t=document.querySelector("#imageModal"),r=document.querySelector(".image-modal__image"),o=document.querySelector(".image-modal__legend");e.forEach(n=>{const i=n.src.slice(0,-13)+".webp";n.addEventListener("click",()=>{var l;const a=((l=n.nextElementSibling)==null?void 0:l.firstElementChild).innerText;t.showModal(),r.setAttribute("src",i),o.innerText=a})}),t.addEventListener("cancel",()=>{r.setAttribute("src","#")}),t.addEventListener("close",()=>{r.setAttribute("src","#")})}g();const I=document.querySelector(".header__logo");I.addEventListener("click",()=>{window.location.href="/Fisheye/index.html"});const d=document.querySelector(".photographer-media__order-select");d.addEventListener("change",async()=>{const e=d.value,t=p(),r=await h();t?r?(M(),m(t,e,r.media)):console.log("Error : couldn't fetch photographers' data to reorganize media"):console.log("Error : no photographer ID")});function M(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}const k=document.querySelector(".image-modal__previous-icon"),v=document.querySelector(".image-modal__next-icon");k.addEventListener("click",()=>{u(-1)});v.addEventListener("click",()=>{u(1)});function u(e){console.log(`Scroll ${e} image`)}function T(){Array.from(document.querySelectorAll(".photographer-media__legend-likes")).forEach(t=>{t.addEventListener("click",()=>{t.classList.contains("--liked")?(t.innerHTML=`${Number(t.innerText)-1} <i class="fa-regular fa-heart"></i>`,t.classList.remove("--liked")):(t.innerHTML=`${Number(t.innerText)+1} <i class="fa-solid fa-heart"></i>`,t.classList.add("--liked")),q()})})}function q(){const e=Array.from(document.querySelectorAll(".photographer-media__legend-likes")),t=document.querySelector(".photographer-info-bar__likes");let r=0;e.forEach(o=>{r+=Number(o.innerText)}),t.innerHTML=`${r.toString()} <i class = "fa-solid fa-heart"></i>`}
