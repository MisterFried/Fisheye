import{f as L}from"./fetchPhotographersData-4ebd6617.js";async function q(){const e=w();if(e){const r=await L();if(r){const{photographers:n,media:t}=r,a=n.find(i=>i.id===e),o=t.filter(i=>i.photographerId===e);if(a&&o){T(o,"popular"),A(a),D(o,a.price),$(o);const i=document.querySelector(".photographer-media__order-select");i.addEventListener("change",()=>{T(o,i.value),B(),$(o)})}else console.error(`Error : no photographer with ID : ${e}`)}else console.error("Error : couldn't fetch photographers' data")}else console.error("Error : no photographer ID")}function w(){const r=new URLSearchParams(window.location.search).get("id");if(r)return Number(r);console.error("Error : No ID parameter")}function A(e){const r=document.querySelector(".photographer-presentation__name"),n=document.querySelector(".photographer-presentation__location"),t=document.querySelector(".photographer-presentation__tagline"),a=document.querySelector(".photographer-presentation__image"),o=document.querySelector(".contact-modal__title");r.innerText=e.name,n.innerText=`${e.city}, ${e.country}`,t.innerText=e.tagline,a.src=`/Fisheye/images/photographers-profile-picture/${e.portrait}`,a.alt=`Photo de profil de ${e.name}`,o.innerText=`Contactez-moi ${e.name}`}function $(e){const r=document.querySelector(".photographer-media__container");e.forEach(n=>{const t=document.createElement("div");if(t.classList.add("photographer-media__media-container"),n.image){const o=P(n);t.appendChild(o)}if(n.video){const o=z(n);t.appendChild(o)}!n.image&&!n.video&&console.error(`Couldn't find the filename for : ${n.title}`);const a=x(n);t.appendChild(a),r==null||r.appendChild(t)}),H(e),N(e)}function P(e){const n=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("button");t.classList.add("photographer-media__image-button-container"),t.ariaLabel=`Clickez pour ouvrir "${e.title}" en grand`;const a=document.createElement("img");return a.classList.add("photographer-media__image"),a.src=n,a.alt=`Photo : ${e.title}`,a.loading="lazy",t.appendChild(a),t}function z(e){const r=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,n=r.slice(0,-4)+"_thumbnail.png",t=document.createElement("button");t.classList.add("photographer-media__video-button-container"),t.ariaLabel=`Clickez pour ouvrir "${e.title}" en grand`;const a=document.createElement("video");a.classList.add("photographer-media__video"),a.poster=n;const o=document.createElement("source");return o.src=r,a.appendChild(o),t.appendChild(a),t}function x(e){const r=document.createElement("div");r.classList.add("photographer-media__legend");const n=document.createElement("span");n.classList.add("photographer-media__legend-name"),n.innerText=e.title;const t=document.createElement("button");return t.classList.add("photographer-media__legend-likes"),e.isLiked?t.innerHTML=`${e.likes} <i class="fa-solid fa-heart" aria-label="likes" ></i>`:t.innerHTML=`${e.likes} <i class="fa-regular fa-heart" aria-label="likes" ></i>`,r.append(n,t),r}function D(e,r){const n=document.querySelector(".photographer-info-bar__price");n.innerText=`${r}â‚¬/ jour`,C(e)}function C(e){const r=document.querySelector(".photographer-info-bar__likes");let n=0;e.forEach(t=>{n+=t.likes}),r.innerHTML=`${n} <i class = "fa-solid fa-heart" aria-label="likes"></i>`}function H(e){const r=Array.from(document.querySelectorAll(".photographer-media__image-button-container, .photographer-media__video-button-container")),n=document.querySelector("#mediaModal"),t=document.querySelector(".media-modal__image"),a=document.querySelector(".media-modal__video"),o=document.createElement("source");a.appendChild(o);const i=document.querySelector(".media-modal__legend"),c=document.querySelector(".media-modal__next-icon"),m=document.querySelector(".media-modal__previous-icon");let h="",p="",g="",y="",f=[];const E=()=>b(1),I=()=>b(-1);r.forEach(l=>{l.addEventListener("click",u=>{n.showModal();const d=u.currentTarget.firstElementChild;d instanceof HTMLImageElement?(p="image",h=`${d.src.slice(0,-13)}.webp`):d instanceof HTMLVideoElement&&(p="video",h=d.firstElementChild.src),f=h.split("/"),y=f.pop(),g=f.join("/"),S(p,y,g),c.addEventListener("click",E),m.addEventListener("click",I),document.addEventListener("keydown",M)})});function M(l){l.key==="ArrowLeft"?m.click():l.key==="ArrowRight"&&c.click()}function b(l){let u="";t.style.display==="block"&&a.style.display==="none"&&(f=t.src.split("/")),t.style.display==="none"&&a.style.display==="block"&&(f=o.src.split("/")),y=f.pop(),g=f.join("/");let s=e.findIndex(d=>d.image===y||d.video===y);s+l<=-1?s=e.length:s+l>=e.length&&(s=-1),e[s+l].image?(p="image",u=e[s+l].image):e[s+l].video&&(p="video",u=e[s+l].video),S(p,u,g)}function S(l,u,s){let d="";switch(l){case"image":t.style.display="block",a.style.display="none",d=e.find(k=>k.image===u).title,t.src=`${s}/${u}`,t.alt=`Photo : ${d}`;break;case"video":t.style.display="none",a.style.display="block",d=e.find(k=>k.video===u).title,o.src=`${s}/${u}`;break}i.innerText=d}n.addEventListener("close",()=>{t.src="#",t.style.display="none",o.src="#",a.style.display="none",c.removeEventListener("click",E),m.removeEventListener("click",I),document.removeEventListener("keydown",M)})}function T(e,r){switch(r){case"popular":e.sort((n,t)=>t.likes-n.likes);break;case"date":e.sort((n,t)=>{const a=new Date(n.date),o=new Date(t.date);return a<o?-1:a>o?1:0});break;case"name":e.sort((n,t)=>{const a=n.title.toUpperCase(),o=t.title.toUpperCase();return a<o?-1:a>o?1:0});break;default:console.error("Unknown sort method");break}}function B(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}function N(e){Array.from(document.querySelectorAll(".photographer-media__legend-likes")).forEach(n=>{n.addEventListener("click",t=>{const o=t.currentTarget.parentElement.parentElement.firstElementChild.firstElementChild;if(o instanceof HTMLImageElement){const m=o.src.split("/").pop().slice(0,-13),h=e.findIndex(p=>{var g;return((g=p.image)==null?void 0:g.slice(0,-5))===m});i(h)}else if(o instanceof HTMLVideoElement){const m=o.firstChild.src.split("/").pop(),h=e.findIndex(p=>p.video===m);i(h)}function i(c){e[c].isLiked?(e[c].likes-=1,e[c].isLiked=!1,n.innerHTML=`${e[c].likes} <i class="fa-regular fa-heart" aria-label="likes" ></i>`):(e[c].likes+=1,e[c].isLiked=!0,n.innerHTML=`${e[c].likes} <i class="fa-solid fa-heart" aria-label="likes" ></i>`),C(e)}})})}q();const R=/^[a-z,A-Z]+(([\-,', ])?[a-z,A-Z])*$/,U=/^[a-z,A-Z,0-9]+([\-,.,_]?[a-z,A-Z,0-9]+)*@{1}[a-z,A-Z]{2,}\.{1}[a-z,A-Z]{2,}$/,_=document.querySelector(".contact-modal__button"),v=document.querySelector("#contactModal");_==null||_.addEventListener("click",()=>{const e=Array.from(document.querySelectorAll(".contact-modal__text-input"));let r=!0,n={};e.forEach(o=>{const i=document.querySelector(`#${o.name}-incorrect-input`);if(i)switch(o.name){case"firstname":case"lastname":R.test(o.value)?t(o,i):a(i);break;case"email":U.test(o.value)?t(o,i):a(i);break;case"message":o.value!==""?t(o,i):a(i);break}else console.error("Error message null")}),r&&(console.info(n),v==null||v.close(),e.forEach(o=>{o.value=""}));function t(o,i){n[o.name]=o.value,i.style.display="none"}function a(o){r=!1,o.style.display="inline"}});
