import{f as _}from"./fetchPhotographersData-6b148f26.js";async function E(){const e=y();if(e){const n=await _();if(n){const o=n.photographers,t=n.media,r=o.find(d=>d.id===e);let a=t.filter(d=>d.photographerId===e);if(r&&a.length!==0){const d=f(a,"popular");k(r),v(d,r.price),g(d);const i=document.querySelector(".photographer-media__order-select");i.addEventListener("change",()=>{const c=f(a,i.value);$(),g(c)})}}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function y(){const n=new URLSearchParams(window.location.search).get("id");if(n)return Number(n)}function k(e){const n=document.querySelector(".photographer-presentation__name"),o=document.querySelector(".photographer-presentation__location"),t=document.querySelector(".photographer-presentation__tagline"),r=document.querySelector(".photographer-presentation__image"),a=document.querySelector(".contact-modal__title");n.innerText=e.name,o.innerText=`${e.city}, ${e.country}`,t.innerText=e.tagline,r.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${e.portrait}`),r.setAttribute("alt",`Photo de profil de ${e.name}`),a.innerText=`Contactez-moi ${e.name}`}function g(e){const n=document.querySelector(".photographer-media__container");e.forEach(o=>{const t=document.createElement("div");t.classList.add("photographer-media__media-container");let r;o.image&&(r=I(o),t.appendChild(r)),o.video&&(r=S(o),t.appendChild(r)),!o.image&&!o.video&&console.log(`Couldn't find the filename for : ${o.title}`);const a=M(o);t.appendChild(a),n.appendChild(t)}),T(e),b(e)}function I(e){const o=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("img");return t.setAttribute("src",o),t.classList.add("photographer-media__image"),t.setAttribute("alt",`Photo : ${e.title}`),t.setAttribute("decoding","async"),t}function S(e){const n=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,o=n.slice(0,-4)+"_thumbnail.png",t=document.createElement("video"),r=document.createElement("source");return t.classList.add("photographer-media__video"),t.setAttribute("poster",o),t.setAttribute("controls",""),r.setAttribute("src",n),t.appendChild(r),t}function M(e){const n=document.createElement("div"),o=document.createElement("span"),t=document.createElement("span");return n.classList.add("photographer-media__legend"),o.classList.add("photographer-media__legend-name"),o.innerText=e.title,t.classList.add("photographer-media__legend-likes"),e.isLiked?t.innerHTML=`${e.likes} <i class="fa-solid fa-heart"></i>`:t.innerHTML=`${e.likes} <i class="fa-regular fa-heart"></i>`,n.append(o,t),n}function v(e,n){const o=document.querySelector(".photographer-info-bar__likes");let t;t=document.querySelector(".photographer-info-bar__price");let r=0;e.forEach(a=>{r+=a.likes}),o.innerHTML=`${r} <i class = "fa-solid fa-heart"></i>`,t.innerText=`${n}â‚¬/ jour`}function u(e){const n=document.querySelector(".photographer-info-bar__likes");let o=0;e.forEach(t=>{o+=t.likes}),n.innerHTML=`${o} <i class = "fa-solid fa-heart"></i>`}function T(e){const n=Array.from(document.querySelectorAll(".photographer-media__image")),o=document.querySelector("#imageModal"),t=document.querySelector(".image-modal__image"),r=document.querySelector(".image-modal__legend");n.forEach(i=>{const p=i.src.slice(0,-13)+".webp";i.addEventListener("click",()=>{var l;const s=(l=i.nextElementSibling)==null?void 0:l.firstElementChild;o.showModal(),t.setAttribute("src",p),r.innerText=s.innerText})}),document.querySelector(".image-modal__next-icon").addEventListener("click",()=>{const i=document.querySelector(".image-modal__image"),c=document.querySelector(".image-modal__legend"),p=i.src.split("/").pop(),s=i.src.split("/");s.pop();const l=s.join("/");e.forEach((m,h)=>{m.image===p&&(h===e.length-1?(i.src=`${l}/${e[0].image}`,c.innerText=e[0].title):(i.src=`${l}/${e[h+1].image}`,c.innerText=e[h+1].title))})}),document.querySelector(".image-modal__previous-icon").addEventListener("click",()=>{const i=document.querySelector(".image-modal__image"),c=i.src.split("/").pop(),p=i.src.split("/");p.pop();const s=p.join("/");e.forEach((l,m)=>{l.image===c&&(m===0?(i.src=`${s}/${e[e.length-1].image}`,r.innerText=e[e.length-1].title):(i.src=`${s}/${e[m-1].image}`,r.innerText=e[m-1].title))})}),o.addEventListener("cancel",()=>{t.setAttribute("src","#")}),o.addEventListener("close",()=>{t.setAttribute("src","#")})}function f(e,n){switch(n){case"popular":e.sort((o,t)=>t.likes-o.likes);break;case"date":e.sort((o,t)=>{const r=new Date(o.date),a=new Date(t.date);return r<a?-1:r>a?1:0});break;case"name":e.sort((o,t)=>{const r=o.title.toUpperCase(),a=t.title.toUpperCase();return r<a?-1:r>a?1:0});break;default:console.log("Unknown sort method");break}return e}function $(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}function b(e){Array.from(document.querySelectorAll(".photographer-media__legend-likes")).forEach(o=>{o.addEventListener("click",t=>{var i;const a=t.target.parentElement.parentElement.firstElementChild;if(a instanceof HTMLImageElement){const p=a.src.split("/").pop().slice(0,-13);e.forEach((s,l)=>{s.image&&s.image.slice(0,-5)===p&&d(l)})}if(a instanceof HTMLVideoElement){const p=(i=a.firstChild.src.split("/").pop())==null?void 0:i.slice(0,-4);e.forEach((s,l)=>{if(s.video){const m=s.video.slice(0,-4);p===m&&d(l)}})}function d(c){e[c].isLiked?(e[c].likes-=1,e[c].isLiked=!1,o.innerHTML=`${e[c].likes} <i class="fa-regular fa-heart"></i>`,u(e)):(e[c].likes+=1,e[c].isLiked=!0,o.innerHTML=`${e[c].likes} <i class="fa-solid fa-heart"></i>`,u(e))}})})}E();const q=document.querySelector(".header__logo");q.addEventListener("click",()=>{window.location.href="/Fisheye/"});
