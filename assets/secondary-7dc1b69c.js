import{f as u}from"./fetchPhotographersData-6b148f26.js";async function f(){const e=_();if(e){const r=await u();if(r){const o=r.photographers,t=r.media,n=o.find(d=>d.id===e);let a=t.filter(d=>d.photographerId===e);if(n&&a.length!==0){const d=g(a,"popular");I(n),S(d,n.price),m(d);const i=document.querySelector(".photographer-media__order-select");i.addEventListener("change",()=>{const c=g(a,i.value);$(),m(c)})}}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function _(){const r=new URLSearchParams(window.location.search).get("id");if(r)return Number(r)}function I(e){const r=document.querySelector(".photographer-presentation__name"),o=document.querySelector(".photographer-presentation__location"),t=document.querySelector(".photographer-presentation__tagline"),n=document.querySelector(".photographer-presentation__image"),a=document.querySelector(".contact-modal__title");r.innerText=e.name,o.innerText=`${e.city}, ${e.country}`,t.innerText=e.tagline,n.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${e.portrait}`),n.setAttribute("alt",`Photo de profil de ${e.name}`),a.innerText=`Contactez-moi ${e.name}`}function m(e){const r=document.querySelector(".photographer-media__container");e.forEach(o=>{const t=document.createElement("div");t.classList.add("photographer-media__media-container");let n;o.image&&(n=k(o),t.appendChild(n)),o.video&&(n=E(o),t.appendChild(n)),!o.image&&!o.video&&console.log(`Couldn't find the filename for : ${o.title}`);const a=y(o);t.appendChild(a),r.appendChild(t)}),M(e),v(e)}function k(e){const o=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("img");return t.setAttribute("src",o),t.classList.add("photographer-media__image"),t.setAttribute("alt",`Photo : ${e.title}`),t.setAttribute("decoding","async"),t}function E(e){const r=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,o=r.slice(0,-4)+"_thumbnail.png",t=document.createElement("video"),n=document.createElement("source");return t.classList.add("photographer-media__video"),t.setAttribute("poster",o),t.setAttribute("controls",""),n.setAttribute("src",r),t.appendChild(n),t}function y(e){const r=document.createElement("div"),o=document.createElement("span"),t=document.createElement("span");return r.classList.add("photographer-media__legend"),o.classList.add("photographer-media__legend-name"),o.innerText=e.title,t.classList.add("photographer-media__legend-likes"),e.isLiked?t.innerHTML=`${e.likes} <i class="fa-solid fa-heart"></i>`:t.innerHTML=`${e.likes} <i class="fa-regular fa-heart"></i>`,r.append(o,t),r}function S(e,r){const o=document.querySelector(".photographer-info-bar__likes");let t;t=document.querySelector(".photographer-info-bar__price");let n=0;e.forEach(a=>{n+=a.likes}),o.innerHTML=`${n} <i class = "fa-solid fa-heart"></i>`,t.innerText=`${r}â‚¬/ jour`}function T(e){const r=document.querySelector(".photographer-info-bar__likes");let o=0;e.forEach(t=>{o+=t.likes}),r.innerHTML=`${o} <i class = "fa-solid fa-heart"></i>`}function M(e){const r=Array.from(document.querySelectorAll(".photographer-media__image")),o=document.querySelector("#imageModal"),t=document.querySelector(".image-modal__image"),n=document.querySelector(".image-modal__legend"),a=document.querySelector(".image-modal__next-icon"),d=document.querySelector(".image-modal__previous-icon");r.forEach(c=>{const s=c.src.slice(0,-13)+".webp";c.addEventListener("click",()=>{var h;const p=(h=c.nextElementSibling)==null?void 0:h.firstElementChild;o.showModal(),t.setAttribute("src",s),n.innerText=p.innerText})}),a.addEventListener("click",()=>{const[c,l]=i(),s=e.findIndex(p=>p.image===c);s===e.length-1?(t.src=`${l}/${e[0].image}`,n.innerText=e[0].title):(t.src=`${l}/${e[s+1].image}`,n.innerText=e[s+1].title)}),d.addEventListener("click",()=>{const[c,l]=i(),s=e.findIndex(p=>p.image===c);s===0?(t.src=`${l}/${e[e.length-1].image}`,n.innerText=e[e.length-1].title):(t.src=`${l}/${e[s-1].image}`,n.innerText=e[s-1].title)});function i(){const c=t.src.split("/").pop(),l=t.src.split("/");l.pop();const s=l.join("/");return[c,s]}o.addEventListener("cancel",()=>{t.setAttribute("src","#")}),o.addEventListener("close",()=>{t.setAttribute("src","#")})}function g(e,r){switch(r){case"popular":e.sort((o,t)=>t.likes-o.likes);break;case"date":e.sort((o,t)=>{const n=new Date(o.date),a=new Date(t.date);return n<a?-1:n>a?1:0});break;case"name":e.sort((o,t)=>{const n=o.title.toUpperCase(),a=t.title.toUpperCase();return n<a?-1:n>a?1:0});break;default:console.log("Unknown sort method");break}return e}function $(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}function v(e){Array.from(document.querySelectorAll(".photographer-media__legend-likes")).forEach(o=>{o.addEventListener("click",t=>{const a=t.target.parentElement.parentElement.firstElementChild;if(a instanceof HTMLImageElement){const c=a.src.split("/").pop().slice(0,-13),l=e.findIndex(s=>{var p;return((p=s.image)==null?void 0:p.slice(0,-5))===c});d(l)}else if(a instanceof HTMLVideoElement){const c=a.firstChild.src.split("/").pop(),l=e.findIndex(s=>s.video===c);d(l)}function d(i){e[i].isLiked?(e[i].likes-=1,e[i].isLiked=!1,o.innerHTML=`${e[i].likes} <i class="fa-regular fa-heart"></i>`):(e[i].likes+=1,e[i].isLiked=!0,o.innerHTML=`${e[i].likes} <i class="fa-solid fa-heart"></i>`),T(e)}})})}f();const b=document.querySelector(".header__logo");b.addEventListener("click",()=>{window.location.href="/Fisheye/"});
