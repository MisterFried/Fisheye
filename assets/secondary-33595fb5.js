import{f as $}from"./fetchPhotographersData-78d42b69.js";async function T(){const e=q();if(e){const r=await $();if(r){const n=r.photographers,t=r.media,o=n.find(i=>i.id===e);let a=t.filter(i=>i.photographerId===e);if(o&&a.length!==0){const i=C(a,"popular");A(o),z(i,o.price),L(i);const m=document.querySelector(".photographer-media__order-select");m.addEventListener("change",()=>{const l=C(a,m.value);D(),L(l)})}}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function q(){const r=new URLSearchParams(window.location.search).get("id");if(r)return Number(r)}function A(e){const r=document.querySelector(".photographer-presentation__name"),n=document.querySelector(".photographer-presentation__location"),t=document.querySelector(".photographer-presentation__tagline"),o=document.querySelector(".photographer-presentation__image"),a=document.querySelector(".contact-modal__title");r.innerText=e.name,n.innerText=`${e.city}, ${e.country}`,t.innerText=e.tagline,o.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${e.portrait}`),o.setAttribute("alt",`Photo de profil de ${e.name}`),a.innerText=`Contactez-moi ${e.name}`}function L(e){const r=document.querySelector(".photographer-media__container");e.forEach(n=>{const t=document.createElement("div");t.classList.add("photographer-media__media-container");let o;n.image&&(o=w(n),t.appendChild(o)),n.video&&(o=P(n),t.appendChild(o)),!n.image&&!n.video&&console.log(`Couldn't find the filename for : ${n.title}`);const a=x(n);t.appendChild(a),r.appendChild(t)}),H(e),N(e)}function w(e){const n=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("button");t.classList.add("photographer-media__image-button-container"),t.ariaLabel=`Clickez pour ouvrir "${e.title}" en grand`;const o=document.createElement("img");return o.src=n,o.classList.add("photographer-media__image"),o.alt=`Photo : ${e.title}`,o.decoding="async",t.appendChild(o),t}function P(e){const r=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,n=r.slice(0,-4)+"_thumbnail.png",t=document.createElement("button");t.classList.add("photographer-media__video-button-container"),t.ariaLabel=`Clickez pour ouvrir "${e.title}" en grand`;const o=document.createElement("video"),a=document.createElement("source");return o.classList.add("photographer-media__video"),o.poster=n,a.src=r,o.appendChild(a),t.appendChild(o),t}function x(e){const r=document.createElement("div"),n=document.createElement("div"),t=document.createElement("span"),o=document.createElement("button");return r.classList.add("photographer-media__legend"),r.append(n,o),n.classList.add("photographer-media__legend-name-container"),n.appendChild(t),t.classList.add("photographer-media__legend-name"),t.innerText=e.title,o.classList.add("photographer-media__legend-likes"),e.isLiked?o.innerHTML=`${e.likes} <i class="fa-solid fa-heart" aria-label="likes" ></i>`:o.innerHTML=`${e.likes} <i class="fa-regular fa-heart" aria-label="likes" ></i>`,r}function z(e,r){const n=document.querySelector(".photographer-info-bar__likes");let t;t=document.querySelector(".photographer-info-bar__price");let o=0;e.forEach(a=>{o+=a.likes}),n.innerHTML=`${o} <i class = "fa-solid fa-heart" aria-label="likes" ></i>`,t.innerText=`${r}â‚¬/ jour`}function B(e){const r=document.querySelector(".photographer-info-bar__likes");let n=0;e.forEach(t=>{n+=t.likes}),r.innerHTML=`${n} <i class = "fa-solid fa-heart" aria-label="likes"></i>`}function H(e){const r=Array.from(document.querySelectorAll(".photographer-media__image-button-container, .photographer-media__video-button-container")),n=document.querySelector("#mediaModal"),t=document.querySelector(".media-modal__image"),o=document.querySelector(".media-modal__video"),a=document.createElement("source");o.appendChild(a);const i=document.querySelector(".media-modal__legend"),m=document.querySelector(".media-modal__next-icon"),l=document.querySelector(".media-modal__previous-icon");let g="",p="",h="",f="",y=[];const v=()=>b(1),E=()=>b(-1);r.forEach(c=>{c.addEventListener("click",u=>{n.showModal();const d=u.currentTarget.firstElementChild;d instanceof HTMLImageElement?(p="image",g=`${d.src.slice(0,-13)}.webp`):d instanceof HTMLVideoElement&&(p="video",g=d.firstElementChild.src),y=g.split("/"),f=y.pop(),h=y.join("/"),I(p,f,h),m.addEventListener("click",v),l.addEventListener("click",E),document.addEventListener("keydown",M)})});function M(c){c.key==="ArrowLeft"?l.click():c.key==="ArrowRight"&&m.click()}function b(c){let u="";t.style.display==="block"&&o.style.display==="none"&&(y=t.src.split("/")),t.style.display==="none"&&o.style.display==="block"&&(y=a.src.split("/")),f=y.pop(),h=y.join("/");let s=e.findIndex(d=>d.image===f||d.video===f);s+c<=-1?s=e.length:s+c>=e.length&&(s=-1),e[s+c].image?(p="image",u=e[s+c].image):e[s+c].video&&(p="video",u=e[s+c].video),I(p,u,h)}function I(c,u,s){var k,S;let d="";switch(c){case"image":t.style.display="block",o.style.display="none",d=(k=e.find(_=>_.image===u))==null?void 0:k.title,t.src=`${s}/${u}`,t.alt=d;break;case"video":t.style.display="none",o.style.display="block",d=(S=e.find(_=>_.video===u))==null?void 0:S.title,a.src=`${s}/${u}`;break}i.innerText=d}n.addEventListener("close",()=>{t.src="#",t.style.display="none",a.src="#",o.style.display="none",m.removeEventListener("click",v),l.removeEventListener("click",E),document.removeEventListener("keydown",M)})}function C(e,r){switch(r){case"popular":e.sort((n,t)=>t.likes-n.likes);break;case"date":e.sort((n,t)=>{const o=new Date(n.date),a=new Date(t.date);return o<a?-1:o>a?1:0});break;case"name":e.sort((n,t)=>{const o=n.title.toUpperCase(),a=t.title.toUpperCase();return o<a?-1:o>a?1:0});break;default:console.log("Unknown sort method");break}return e}function D(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}function N(e){Array.from(document.querySelectorAll(".photographer-media__legend-likes")).forEach(n=>{n.addEventListener("click",t=>{var m;const a=(m=t.target.parentElement.parentElement.firstElementChild)==null?void 0:m.firstElementChild;if(a instanceof HTMLImageElement){const g=a.src.split("/").pop().slice(0,-13),p=e.findIndex(h=>{var f;return((f=h.image)==null?void 0:f.slice(0,-5))===g});i(p)}else if(a instanceof HTMLVideoElement){const g=a.firstChild.src.split("/").pop(),p=e.findIndex(h=>h.video===g);i(p)}function i(l){e[l].isLiked?(e[l].likes-=1,e[l].isLiked=!1,n.innerHTML=`${e[l].likes} <i class="fa-regular fa-heart" aria-label="likes" ></i>`):(e[l].likes+=1,e[l].isLiked=!0,n.innerHTML=`${e[l].likes} <i class="fa-solid fa-heart" aria-label="likes" ></i>`),B(e)}})})}T();const R=/^[a-z,A-Z]+(([\-,', ])?[a-z,A-Z])*$/,U=/^[a-z,A-Z,0-9]+([\-,.,_]?[a-z,A-Z,0-9]+)*@{1}[a-z,A-Z]{2,}\.{1}[a-z,A-Z]{2,}$/,V=document.querySelector(".contact-modal__button"),Z=document.querySelector("#contactModal");V.addEventListener("click",()=>{const e=Array.from(document.querySelectorAll(".contact-modal__text-input"));let r=!0,n={firstname:"",lastname:"",email:"",message:""};e.forEach(a=>{const i=document.querySelector(`#${a.name}-incorrect-input`);switch(a.name){case"firstname":case"lastname":R.test(a.value)===!1?o(i):t(a,i);break;case"email":U.test(a.value)===!1?o(i):t(a,i);break;case"message":a.value===""?o(i):t(a,i);break}}),r&&(console.log(n),Z.close(),e.forEach(a=>{a.value=""}));function t(a,i){n[a.name]=a.value,i.style.display="none"}function o(a){r=!1,a.style.display="inline"}});
