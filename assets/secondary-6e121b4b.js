import{f as p}from"./fetchPhotographersData-63e617e7.js";async function u(){const e=h();let r="popular";if(e){const o=await p();if(o){const t=await g(e,o.photographers),n=await m(e,r,o.media);L(n,t),b()}else console.log("Error : couldn't fetch photographers' data")}else console.log("Error : no photographer ID")}function h(){const r=new URLSearchParams(window.location.search).get("id");if(r)return Number(r)}async function g(e,r){const o=document.querySelector(".photographer-presentation__name"),t=document.querySelector(".photographer-presentation__location"),n=document.querySelector(".photographer-presentation__tagline"),c=document.querySelector(".photographer-presentation__image"),i=document.querySelector(".contact-modal__title");let s=0;return r.forEach(a=>{a.id===e&&(o.innerText=a.name,t.innerText=`${a.city}, ${a.country}`,n.innerText=a.tagline,c.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${a.portrait}`),c.setAttribute("alt",`Photo de profil de ${a.name}`),i.innerText=`Contactez-moi ${a.name}`,s=a.price)}),s}async function m(e,r,o){const t=document.querySelector(".photographer-media__container");let n=0;return f(o,r).forEach(i=>{if(i.photographerId===e){const s=document.createElement("div");s.classList.add("photographer-media__media-container");let a;i.image&&(a=_(i),s.appendChild(a)),i.video&&(a=y(i),s.appendChild(a)),!i.image&&!i.video&&console.log(`Couldn't find the filename for : ${i.title}`);const d=E(i);s.appendChild(d),t.appendChild(s),n+=i.likes}}),n}function f(e,r){switch(r){case"popular":e.sort((o,t)=>t.likes-o.likes);break;case"date":e.sort((o,t)=>{const n=new Date(o.date),c=new Date(t.date);return n<c?-1:n>c?1:0});break;case"name":e.sort((o,t)=>{const n=o.title.toUpperCase(),c=t.title.toUpperCase();return n<c?-1:n>c?1:0});break}return e}function _(e){const o=`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`.slice(0,-5)+"_resized.webp",t=document.createElement("img");return t.setAttribute("src",o),t.classList.add("photographer-media__image"),t.setAttribute("alt",`Photo : ${e.title}`),t.setAttribute("decoding","async"),t}function y(e){const r=`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`,o=r.slice(0,-4)+"_thumbnail.png",t=document.createElement("video"),n=document.createElement("source");return t.classList.add("photographer-media__video"),t.setAttribute("poster",o),t.setAttribute("controls",""),n.setAttribute("src",r),t.appendChild(n),t}function E(e){const r=document.createElement("div"),o=document.createElement("span"),t=document.createElement("span");return r.classList.add("photographer-media__legend"),o.classList.add("photographer-media__legend-name"),o.innerText=e.title,t.classList.add("photographer-media__legend-likes"),t.innerHTML=`${e.likes} <i class="fa-regular fa-heart"></i>`,r.append(o,t),r}function L(e,r){const o=document.querySelector(".photographer-info-bar__likes"),t=document.querySelector(".photographer-info-bar__price");o.innerHTML=`${e} <i class = "fa-regular fa-heart"></i>`,t.innerText=`${r}â‚¬/ jour`}function b(){const e=Array.from(document.querySelectorAll(".photographer-media__image")),r=document.querySelector("#imageModal"),o=document.querySelector(".image-modal__image"),t=document.querySelector(".image-modal__legend");e.forEach(n=>{const i=n.src.slice(0,-13)+".webp";n.addEventListener("click",()=>{var d;const a=((d=n.nextElementSibling)==null?void 0:d.firstElementChild).innerText;r.showModal(),o.setAttribute("src",i),t.innerText=a})}),r.addEventListener("cancel",()=>{o.setAttribute("src","#")}),r.addEventListener("close",()=>{o.setAttribute("src","#")})}u();const I=document.querySelector(".header__logo");I.addEventListener("click",()=>{window.location.href="/Fisheye/index.html"});const l=document.querySelector(".photographer-media__order-select");l.addEventListener("change",async()=>{const e=l.value,r=h(),o=await p();r?o?(S(),m(r,e,o.media)):console.log("Error : couldn't fetch photographers' data to reorganize media"):console.log("Error : no photographer ID")});function S(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.firstChild)}
