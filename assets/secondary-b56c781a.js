import{f as h}from"./fetchData-0bfb1966.js";const d=u();let _="popular";d?(y(d),m(d,_)):console.log("Incorrect photographer ID");function u(){const t=new URLSearchParams(window.location.search).get("id");if(t)return Number(t);console.log("Error : no photographer ID")}async function y(e){const t=document.querySelector(".photographer-presentation__name"),o=document.querySelector(".photographer-presentation__location"),n=document.querySelector(".photographer-presentation__tagline"),i=document.querySelector(".photographer-presentation__image"),a=document.querySelector(".contact-modal__title"),p=document.querySelector(".photographer-info-bar__price");(await h("photographers")).forEach(r=>{r.id===e&&(t.innerText=r.name,o.innerText=`${r.city}, ${r.country}`,n.innerText=r.tagline,i.setAttribute("src",`/Fisheye/images/photographers-profile-picture/${r.portrait}`),a.innerText=`Contactez-moi ${r.name}`,p.innerText=`${r.price}â‚¬ / jour`)})}async function m(e,t){const o=await h("media"),n=document.querySelector(".photographer-media__container"),i=document.querySelector(".photographer-info-bar__likes");let a=0;b(o,t).forEach(c=>{if(c.photographerId===e){const r=document.createElement("div");r.classList.add("photographer-media__media");let s;c.image?(s=L(c),r.appendChild(s)):c.video&&(s=E(c),r.appendChild(s));const f=S(c);r.appendChild(f),n.appendChild(r),a+=c.likes}}),i.innerHTML=`${a} <i class="fa-solid fa-heart"></i>`}function L(e){const t=document.createElement("img");return t.setAttribute("src",`/Fisheye/images/photographers-media/${e.photographerId}/${e.image}`),t.setAttribute("loading","lazy"),t.classList.add("photographer-media__image"),t}function E(e){const t=document.createElement("video");t.classList.add("photographer-media__image"),t.setAttribute("controls","");const o=document.createElement("source");return o.setAttribute("src",`/Fisheye/images/photographers-media/${e.photographerId}/${e.video}`),t.setAttribute("loading","lazy"),t.appendChild(o),t}function S(e){const t=document.createElement("div");t.classList.add("photographer-media__legend");const o=document.createElement("span");o.innerText=e.title,o.classList.add("photographer-media__legend-name");const n=document.createElement("span");return n.innerHTML=`${e.likes} <i class="fa-regular fa-heart"></i>`,n.classList.add("photographer-media__legend-likes"),t.append(o,n),t}const k=document.querySelector(".header__logo");k.addEventListener("click",()=>{window.location.href="/Fisheye/index.html"});const q=document.querySelector(".photographer-media__order-select");q.addEventListener("change",e=>{const t=e.target,o=u();o&&(v(),m(o,t.value))});function b(e,t){switch(t){case"popular":e.sort((o,n)=>n.likes-o.likes);break;case"date":e.sort((o,n)=>{const i=new Date(o.date),a=new Date(n.date);return i<a?-1:i>a?1:0});break;case"name":e.sort((o,n)=>{const i=o.title.toUpperCase(),a=n.title.toUpperCase();return i<a?-1:i>a?1:0});break}return e}function v(){const e=document.querySelector(".photographer-media__container");for(;e.firstChild;)e.removeChild(e.lastChild)}const C=document.querySelector(".photographer-presentation__contact-button"),I=document.querySelector(".contact-modal__close-icon"),l=document.querySelector("#modal-container"),M=document.querySelector(".contact-modal");C.addEventListener("click",w);I.addEventListener("click",g);l.addEventListener("click",g);M.addEventListener("click",e=>e.stopPropagation());function w(){l.style.display="block"}function g(){l.style.display="none"}
